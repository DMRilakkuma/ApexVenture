<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.apxvt.common.mapper.UserAuthMapper">

<select id="selectPermissionListByUserId" resultType="java.lang.String">
    select role_key
    from sys_user
             left join sys_user_role
                       on sys_user.user_id = sys_user_role.user_id
             left join sys_role
                       on sys_user_role.role_id = sys_role.role_id
    where sys_user.user_id = #{loginId}
</select>

<select id="selectAuthListByUserId" resultType="java.lang.String">
    select menu_name from sys_menu where menu_id in (select d.menu_id
    from sys_user a
             left join sys_user_role b
                       on a.user_id = b.user_id
             left join sys_role c
                       on b.role_id = c.role_id
             left join sys_role_menu d
                       on c.role_id = d.role_id
    where a.user_id = #{loginId})
</select>
</mapper>